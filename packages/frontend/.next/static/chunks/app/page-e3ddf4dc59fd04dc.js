(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{20408:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(68225),l=t(59845),i=t(28324),n=t(48551),r=t(13273),c=t(33892),d=t(8831),o=t(44823),x=t(24024),u=t(69282);function h(){let{user:e}=(0,x.Jd)(),{getMessagesForBranch:s,addMessageToBranch:t,getBranchParent:h,createBranch:m,setCredits:p,setBranchTitle:f}=(0,c.P)(),[b,j]=(0,l.useState)([]),[v,w]=(0,l.useState)([]),[y,g]=(0,l.useState)(""),[N,z]=(0,l.useState)(!1),[k,S]=(0,l.useState)(""),[_]=(0,l.useState)((0,n.A)()),M=(0,l.useRef)(!1),L=(0,r.useRouter)();(0,l.useEffect)(()=>{(async()=>{if(M.current){let e=await h(_);e&&w(await s(e))}})()},[_,s,h]);let E=async e=>{if(e.preventDefault(),!y.trim())return;M.current||(await m(_),M.current=!0);let s=await t(_,{role:"user",content:y});j(s),g(""),z(!0),S(""),setTimeout(async()=>{try{let{content:e,credits:a}=await (0,d.rJ)([...v,...s],e=>{S(e)});p(a),S("");let l=await t(_,{role:"assistant",content:e});if(j(l),z(!1),2===l.length){let{title:e,credits:s}=await (0,d.KS)(_);await f(_,e),p(s)}"/"===window.location.pathname&&L.push("/branch/".concat(_))}catch(e){console.error("Error getting LLM response:",e),z(!1),S("")}},0)};return 0!==b.length||N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"flex-1 space-y-4 pb-36",children:[b.map((e,s)=>(0,a.jsx)(o.c,{message:e},s)),k&&(0,a.jsx)(o.c,{message:{role:"assistant",content:k}}),N&&!k&&(0,a.jsxs)("div",{className:"flex items-end gap-3 justify-start",children:[(0,a.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300"}),(0,a.jsx)("div",{className:"group flex flex-col items-start w-full",children:(0,a.jsx)("div",{className:"relative px-5 py-3 rounded-md bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"})]})})})]})]})}),(0,a.jsx)(i.V,{message:y,setMessage:g,onSubmit:E})]}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:(0,a.jsxs)("div",{className:"text-center space-y-8 max-w-2xl mx-auto px-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-20 h-20 flex items-center justify-center bg-zinc-900 rounded-2xl shadow-lg",children:(0,a.jsx)(u.A,{className:"w-12 h-12 text-white"})})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-zinc-900",children:["Hey ",(null==e?void 0:e.firstName)||"there",", what would you like to explore today?"]}),(0,a.jsx)("p",{className:"text-lg text-zinc-600",children:"Start a conversation and dive down the rabbit hole of possibilities"})]}),(0,a.jsx)("div",{className:"w-full max-w-2xl",children:(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("form",{onSubmit:E,className:"flex items-center bg-white border border-zinc-200 rounded-full shadow-xl p-2",children:[(0,a.jsx)("input",{type:"text",className:"flex-1 bg-transparent border-none focus:outline-none focus:ring-0 text-base placeholder:text-zinc-500 px-4 py-2",value:y,onChange:e=>g(e.target.value),placeholder:"Type your message..."}),(0,a.jsx)("button",{type:"submit",className:"rounded-full h-10 w-10 bg-zinc-900 text-white hover:bg-zinc-800 transition-colors flex items-center justify-center disabled:opacity-50",disabled:!y.trim(),children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})]})})}},49572:(e,s,t)=>{Promise.resolve().then(t.bind(t,20408))},69282:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(63509).A)("rabbit",[["path",{d:"M13 16a3 3 0 0 1 2.24 5",key:"1epib5"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M18 21h-8a4 4 0 0 1-4-4 7 7 0 0 1 7-7h.2L9.6 6.4a1 1 0 1 1 2.8-2.8L15.8 7h.2c3.3 0 6 2.7 6 6v1a2 2 0 0 1-2 2h-1a3 3 0 0 0-3 3",key:"ue9ozu"}],["path",{d:"M20 8.54V4a2 2 0 1 0-4 0v3",key:"49iql8"}],["path",{d:"M7.612 12.524a3 3 0 1 0-1.6 4.3",key:"1e33i0"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[816,747,703,3,927,518,358],()=>s(49572)),_N_E=e.O()}]);