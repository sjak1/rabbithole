(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{13273:(e,a,s)=>{"use strict";var t=s(39365);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSelectedLayoutSegments")&&s.d(a,{useSelectedLayoutSegments:function(){return t.useSelectedLayoutSegments}})},66137:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var t=s(68225),n=s(59845),r=s(28324),u=s(48551),i=s(13273),c=s(33892),l=s(8831),d=s(44823);function o(){let e=(0,c.P)(e=>e.getMessagesForBranch),a=(0,c.P)(e=>e.addMessageToBranch),s=(0,c.P)(e=>e.setBranchParent),o=(0,c.P)(e=>e.getBranchParent),m=(0,c.P)(e=>e.deleteBranch),h=(0,c.P)(e=>e.createBranch),f=(0,c.P)(e=>e.setCredits),x=(0,c.P)(e=>e.setBranchTitle),[g,p]=(0,n.useState)(""),[w,P]=(0,n.useState)([]),[v,b]=(0,n.useState)([]),[j,y]=(0,n.useState)(!1),[N,S]=(0,n.useState)(""),_=(0,i.useParams)(),B=null==_?void 0:_.id,z=(0,i.useRouter)();async function E(e){if(e.preventDefault(),!g.trim())return;let s=await a(B,{role:"user",content:g});P(s),p(""),y(!0),S(""),setTimeout(async()=>{try{let{content:e,credits:t}=await (0,l.rJ)([...v,...s],e=>{S(e)});f(t),S("");let n=await a(B,{role:"assistant",content:e});if(P(n),y(!1),2===n.length){let{title:e,credits:a}=await (0,l.KS)(B);await x(B,e),f(a)}}catch(e){console.error("Error getting LLM response:",e),y(!1),S("")}},0)}async function L(){let e=(0,u.A)();await h(e),await s(e,B),z.push("/branch/".concat(e))}async function k(){await m(B),z.push("/")}return(0,n.useEffect)(()=>{(async()=>{P(await e(B));let a=await o(B);a&&b(await e(a))})()},[B,e,o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"max-w-[49rem] mx-auto",children:(0,t.jsxs)("div",{className:"flex-1 space-y-8 pb-36",children:[w.map((e,a)=>(0,t.jsx)(d.c,{message:e},a)),N&&(0,t.jsx)(d.c,{message:{role:"assistant",content:N}}),j&&!N&&(0,t.jsxs)("div",{className:"flex items-end gap-3 justify-start",children:[(0,t.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300"}),(0,t.jsx)("div",{className:"group flex flex-col items-start w-full",children:(0,t.jsx)("div",{className:"relative px-5 py-3 rounded-md bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"})]})})})]})]})}),(0,t.jsx)(r.V,{message:g,setMessage:p,onSubmit:E,onBranchOut:L,deleteBranch:k})]})}},77649:(e,a,s)=>{Promise.resolve().then(s.bind(s,66137))}},e=>{var a=a=>e(e.s=a);e.O(0,[747,703,3,927,518,358],()=>a(77649)),_N_E=e.O()}]);