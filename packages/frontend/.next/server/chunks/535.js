exports.id=535,exports.ids=[535],exports.modules={1519:(e,t,r)=>{"use strict";r.d(t,{StoreInitializer:()=>n});let n=(0,r(70873).registerClientReference)(function(){throw Error("Attempted to call StoreInitializer() from the server but StoreInitializer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/components/StoreInitializer.tsx","StoreInitializer")},16045:(e,t,r)=>{"use strict";r.d(t,{StoreInitializer:()=>i}),r(59088);var n=r(81158),s=r(20869);function i(){let{loadUser:e}=(0,n.P)(),{isSignedIn:t}=(0,s.Jd)();return null}},19012:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var n=r(34459),s=r(49879);function i(...e){return(0,s.QP)((0,n.$)(e))}},20232:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"7f5524f8c67e3b180000477bb291dd65e2b8776638":()=>n.ot,"7ff8ae9f5734dcdf3cb5a420b64e6419c754b6424e":()=>n.ai,"7ffe283720f2cc81508f0ffb06be842ea8ccd32e13":()=>n.at});var n=r(1882)},23068:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var n=r(27541),s=r(59088),i=r(26792),a=r.n(i),o=r(81158),c=r(9455),l=r(91647),d=r(19012);let h=s.forwardRef(({className:e,children:t,...r},s)=>(0,n.jsxs)(l.bL,{ref:s,className:(0,d.cn)("relative overflow-hidden",e),...r,children:[(0,n.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,n.jsx)(f,{}),(0,n.jsx)(l.OK,{})]}));h.displayName=l.bL.displayName;let f=s.forwardRef(({className:e,orientation:t="vertical",...r},s)=>(0,n.jsx)(l.VM,{ref:s,orientation:t,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:(0,n.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})}));f.displayName=l.VM.displayName;var b=r(90434),m=r(13595),u=r(54079),p=r(28554),x=r(27581),v=r(79912),y=r(8182),g=r(20869),w=r(26411),j=r(44788);function N(){let{loadBranches:e,branchTitles:t}=(0,o.P)(),{isSidebarOpen:r,toggleSidebar:s}=(0,j.n)(),i=(0,c.usePathname)(),l=Object.entries(t);return(0,n.jsxs)("aside",{className:(0,d.cn)("flex flex-col fixed inset-y-0 z-40 bg-white border-r border-zinc-200 transition-all duration-300 ease-in-out",r?"w-64":"w-20"),children:[(0,n.jsxs)("div",{className:(0,d.cn)("p-4 border-b border-zinc-200 flex items-center",r?"justify-between":"justify-center"),children:[r&&(0,n.jsxs)(a(),{href:"/",className:"flex items-center gap-2 group",children:[(0,n.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-zinc-900 rounded-lg",children:(0,n.jsx)(b.A,{className:"w-5 h-5 text-white"})}),(0,n.jsx)("span",{className:"text-lg font-semibold text-zinc-900",children:"Rabbithole"})]}),(0,n.jsx)(w.$,{variant:"ghost",size:"icon",onClick:s,className:"text-zinc-500 hover:text-zinc-900 group",children:r?(0,n.jsx)(m.A,{size:20}):(0,n.jsxs)("div",{className:"w-8 h-8 flex items-center justify-center bg-zinc-900 rounded-lg group-hover:bg-zinc-800 transition-colors",children:[(0,n.jsx)(b.A,{className:"w-5 h-5 text-white block group-hover:hidden"}),(0,n.jsx)(u.A,{className:"w-5 h-5 text-white hidden group-hover:block"})]})})]}),(0,n.jsxs)(y.iB,{children:[(0,n.jsxs)("div",{className:"p-4 space-y-2",children:[(0,n.jsxs)(a(),{href:"/",className:(0,d.cn)("flex items-center justify-center gap-2 w-full px-4 py-2 text-sm font-medium text-white bg-zinc-900 rounded-md hover:bg-zinc-800 transition-colors",!r&&"px-2"),children:[(0,n.jsx)(p.A,{size:16}),r&&"New Chat"]}),(0,n.jsxs)(a(),{href:"/flow",className:(0,d.cn)("flex items-center justify-center gap-2 w-full px-4 py-2 text-sm font-medium text-zinc-600 bg-zinc-100 rounded-md hover:bg-zinc-200 transition-colors",!r&&"px-2"),children:[(0,n.jsx)(x.A,{size:16}),r&&"View Flow"]})]}),r&&(0,n.jsx)(h,{className:"flex-1",children:(0,n.jsxs)("nav",{className:"px-4 pb-4",children:[(0,n.jsx)("p",{className:"px-4 py-2 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Chats"}),(0,n.jsx)("ul",{className:"space-y-1",children:l.map(([e,t])=>{let r=i===`/branch/${e}`;return(0,n.jsx)("li",{children:(0,n.jsx)(a(),{href:`/branch/${e}`,className:(0,d.cn)("block w-full text-left px-4 py-2 text-sm rounded-md truncate transition-colors",r?"bg-zinc-200 text-zinc-900 font-semibold":"text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900"),children:t})},e)})})]})})]}),(0,n.jsx)(y.Bl,{children:(0,n.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"text-center space-y-4",children:[(0,n.jsx)(v.A,{className:"w-12 h-12 text-zinc-400 mx-auto"}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-zinc-900",children:"Welcome to Rabbithole"}),(0,n.jsx)("p",{className:"text-xs text-zinc-500",children:"Sign in to start chatting and explore different conversation paths"})]}),(0,n.jsx)(g.hZ,{children:(0,n.jsx)(w.$,{size:"sm",className:"w-full",children:"Sign In"})})]})]})})})]})}},26411:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var n=r(27541),s=r(59088),i=r(7235),a=r(67129),o=r(19012);let c=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},l)=>{let d=s?i.DX:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:t,size:r,className:e})),ref:l,...a})});l.displayName="Button"},26549:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var n=r(27541),s=r(44788),i=r(19012),a=r(81158),o=r(9455),c=r(8182),l=r(20869);r(59088);let d=(0,r(67129).F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:e,variant:t,...r}){return(0,n.jsx)("div",{className:(0,i.cn)(d({variant:t}),e),...r})}var f=r(26411);function b(){let{branchTitles:e,credits:t}=(0,a.P)(),r=(0,o.usePathname)().split("/").pop(),s=r?e[r]:"New Chat",i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:4}).format(t);return(0,n.jsxs)("header",{className:"flex items-center justify-between p-4 bg-white border-b border-zinc-200",children:[(0,n.jsx)("h1",{className:"text-lg font-semibold text-zinc-900 truncate",children:s}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(c.iB,{children:[(0,n.jsxs)(h,{variant:"outline",className:"text-sm font-mono",children:["Credits: ",i]}),(0,n.jsx)(l.uF,{})]}),(0,n.jsx)(c.Bl,{children:(0,n.jsx)(l.hZ,{mode:"modal",children:(0,n.jsx)(f.$,{children:"Sign In"})})})]})]})}function m({children:e}){let{isSidebarOpen:t}=(0,s.n)();return(0,n.jsxs)("div",{className:(0,i.cn)("flex flex-col flex-1 h-screen transition-all duration-300 ease-in-out",t?"ml-64":"ml-20"),children:[(0,n.jsx)(b,{}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:e})]})}},34296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"7f25e981ab207f67f120b8342f8cb7c7d8b5d83fd3":()=>n.y});var n=r(97130)},34410:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,21610,23)),Promise.resolve().then(r.t.bind(r,32044,23)),Promise.resolve().then(r.t.bind(r,26416,23)),Promise.resolve().then(r.t.bind(r,67251,23)),Promise.resolve().then(r.t.bind(r,14403,23)),Promise.resolve().then(r.t.bind(r,25035,23)),Promise.resolve().then(r.t.bind(r,91,23)),Promise.resolve().then(r.t.bind(r,32061,23))},44788:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});let n=(0,r(84486).v)(e=>({isSidebarOpen:!0,toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen}))}))},46481:()=>{},46665:(e,t,r)=>{Promise.resolve().then(r.bind(r,86319)),Promise.resolve().then(r.bind(r,67807)),Promise.resolve().then(r.bind(r,36536)),Promise.resolve().then(r.bind(r,76139)),Promise.resolve().then(r.bind(r,86355)),Promise.resolve().then(r.bind(r,83996)),Promise.resolve().then(r.bind(r,26549)),Promise.resolve().then(r.bind(r,23068)),Promise.resolve().then(r.bind(r,16045))},56393:(e,t,r)=>{Promise.resolve().then(r.bind(r,52104)),Promise.resolve().then(r.bind(r,14077)),Promise.resolve().then(r.bind(r,30474)),Promise.resolve().then(r.bind(r,71067)),Promise.resolve().then(r.bind(r,23465)),Promise.resolve().then(r.bind(r,60397)),Promise.resolve().then(r.bind(r,68955)),Promise.resolve().then(r.bind(r,59380)),Promise.resolve().then(r.bind(r,1519))},59380:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(70873).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/components/SideNav.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/components/SideNav.tsx","default")},66145:(e,t,r)=>{"use strict";r.d(t,{FB:()=>i,Ho:()=>o,KS:()=>d,SN:()=>c,VL:()=>s,lY:()=>f,p9:()=>b,rJ:()=>m,tz:()=>a,wz:()=>h,xh:()=>l});let n="http://localhost:4000",s=async e=>{try{let t=await fetch(`${n}/messages/${e}`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch messages");return t.json()}catch(e){return console.error("Error fetching messages:",e),[]}},i=async(e,t)=>{try{let r=await fetch(`${n}/messages/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t}),credentials:"include"});if(!r.ok)throw Error("Failed to set messages");return r.json()}catch(e){throw console.error("Error setting messages:",e),e}},a=async(e,t)=>{try{if(!(await fetch(`${n}/parent/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({childId:e,parentId:t}),credentials:"include"})).ok)throw Error("Failed to set branch parent")}catch(e){throw console.error("Error setting branch parent:",e),e}},o=async e=>{try{let t=await fetch(`${n}/parent/${e}`,{credentials:"include"});if(!t.ok)throw Error("Failed to fetch branch parent");return t.json()}catch(e){throw console.error("Error fetching branch parent:",e),e}},c=async e=>{try{if(!(await fetch(`${n}/branch/${e}`,{method:"DELETE",credentials:"include"})).ok)throw Error("Failed to delete branch")}catch(e){throw console.error("Error deleting the branch:",e),e}},l=async(e,t)=>{try{if(!(await fetch(`${n}/title/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t}),credentials:"include"})).ok)throw Error("Failed to set branch title")}catch(e){throw console.error("Error setting branch title:",e),e}},d=async e=>{try{let t=await fetch(`${n}/title/generate/${e}`,{method:"POST",credentials:"include"});if(!t.ok)throw Error("Failed to generate title");let r=await t.json();return{title:r.updatedBranch.name,credits:r.remainingCredits}}catch(e){throw console.error("Error generating title:",e),e}},h=async()=>{try{let e=await fetch(`${n}/api/user`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch user");return e.json()}catch(e){return console.error("Error fetching user:",e),null}},f=async(e,t="New Branch")=>{try{if(!(await fetch(`${n}/branch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branchId:e,name:t}),credentials:"include"})).ok)throw Error("Failed to create branch")}catch(e){throw console.error("Error creating branch:",e),e}},b=async()=>{try{let e=await fetch(`${n}/branches`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch branches");return e.json()}catch(e){return console.error("Error fetching branches:",e),[]}},m=async(e,t)=>new Promise((r,s)=>{fetch(`${n}/api/llm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e}),credentials:"include"}).then(e=>{if(!e.ok)throw Error("Failed to fetch LLM response");let n=e.body?.getReader(),i=new TextDecoder,a="";if(!n)throw Error("No reader available");(async()=>{try{for(;;){let{done:e,value:o}=await n.read();if(e)break;for(let e of i.decode(o,{stream:!0}).split("\n"))if(e.startsWith("data: "))try{let n=JSON.parse(e.slice(6));if("content"===n.type)a+=n.content,t(a);else if("complete"===n.type)return void r({content:a,credits:n.credits});else if("error"===n.type)return void s(Error(n.error))}catch{}}}catch(e){s(e)}})()}).catch(e=>{console.error("Error fetching LLM response:",e),s(e)})})},68955:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(70873).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/components/MainLayout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/components/MainLayout.tsx","default")},74507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,metadata:()=>h});var n=r(89143),s=r(24636),i=r.n(s);r(46481);var a=r(1519),o=r(75909),c=r(88762),l=r(59380),d=r(68955);let h={title:"Create Next App",description:"Generated by create next app"};function f({children:e}){return(0,n.jsx)(o.lJ,{appearance:{baseTheme:c.dark},publishableKey:"pk_test_b3B0aW1hbC1zdGlua2J1Zy0xMy5jbGVyay5hY2NvdW50cy5kZXYk",signInUrl:"/sign-in",signUpUrl:"/sign-up",children:(0,n.jsx)("html",{lang:"en",children:(0,n.jsxs)("body",{className:i().className,children:[(0,n.jsx)(a.StoreInitializer,{}),(0,n.jsxs)("div",{className:"flex min-h-screen",children:[(0,n.jsx)(l.default,{}),(0,n.jsx)(d.default,{children:e})]})]})})})}},78375:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});var n=r(33833);let s=(0,n.createServerReference)("7f25e981ab207f67f120b8342f8cb7c7d8b5d83fd3",n.callServer,void 0,n.findSourceMapURL,"invalidateCacheAction")},81158:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var n=r(84486),s=r(98805),i=r(66145);let a=(0,n.v)()((0,s.Zr)((e,t)=>({messagesByBranch:{},branchParents:{},branchTitles:{},credits:0,user:null,getMessagesForBranch:async t=>{let r=await (0,i.VL)(t);return e(e=>({messagesByBranch:{...e.messagesByBranch,[t]:r}})),r},addMessageToBranch:async(t,r)=>{let n=await (0,i.FB)(t,r);return e(e=>({messagesByBranch:{...e.messagesByBranch,[t]:n}})),n},setBranchParent:async(t,r)=>{await (0,i.tz)(t,r),e(e=>({branchParents:{...e.branchParents,[t]:r}}))},getBranchParent:async t=>{let r=await (0,i.Ho)(t);return r&&e(e=>({branchParents:{...e.branchParents,[t]:r.id}})),r?.id||null},setBranchTitle:async(t,r)=>{await (0,i.xh)(t,r),e(e=>({branchTitles:{...e.branchTitles,[t]:r}}))},getBranchTitle:e=>t().branchTitles[e]||null,deleteBranch:async t=>{await (0,i.SN)(t),e(e=>{let{[t]:r,...n}=e.messagesByBranch,{[t]:s,...i}=e.branchParents,{[t]:a,...o}=e.branchTitles;return{messagesByBranch:n,branchParents:i,branchTitles:o}})},createBranch:async(e,t)=>{await (0,i.lY)(e,t)},loadBranches:async()=>{let t=await (0,i.p9)();e(()=>{let e={},r={},n={};return t.forEach(t=>{e[t.id]=t.messages??[],t.parentId&&(r[t.id]=t.parentId),n[t.id]=t.name}),{messagesByBranch:e,branchParents:r,branchTitles:n}})},setCredits:t=>{e(()=>({credits:t}))},loadUser:async()=>{let t=await (0,i.wz)();e(()=>({user:t,credits:t?.credits||0}))}}),{name:"chat-storage",skipHydration:!0}))},97458:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,25580,23)),Promise.resolve().then(r.t.bind(r,51330,23)),Promise.resolve().then(r.t.bind(r,76962,23)),Promise.resolve().then(r.t.bind(r,38005,23)),Promise.resolve().then(r.t.bind(r,6065,23)),Promise.resolve().then(r.t.bind(r,74857,23)),Promise.resolve().then(r.t.bind(r,31873,23)),Promise.resolve().then(r.t.bind(r,41363,23))}};