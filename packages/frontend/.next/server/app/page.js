(()=>{var e={};e.id=974,e.ids=[974],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5529:e=>{"use strict";e.exports=require("stream")},8106:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(24660);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21516:(e,t,s)=>{Promise.resolve().then(s.bind(s,60982))},23039:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(74257),i=s(25366),a=s(26416),n=s.n(a),o=s(92919),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,56611)),"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8106))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,74507)),"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33052,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,81629,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,6874,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,8106))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26597:(e,t,s)=>{"use strict";s.d(t,{c:()=>u});var r=s(27541),i=s(59088),a=s(93028),n=s(94932),o=s(78597),l=s(88414),d=s(13820),c=s(48182);let u=({message:e})=>{let[t,s]=(0,i.useState)(!1),[u,x]=(0,i.useState)(null),p=(e,t)=>{navigator.clipboard.writeText(e),"number"==typeof t?(x(t),setTimeout(()=>x(null),2e3)):(s(!0),setTimeout(()=>s(!1),2e3))};return(0,r.jsxs)("div",{className:`flex items-end gap-3 group relative ${"user"===e.role?"justify-end":"justify-start"}`,children:["assistant"===e.role&&(0,r.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300 flex-shrink-0"}),(0,r.jsx)("div",{className:`flex flex-col ${"user"===e.role?"max-w-[60%] items-end":"items-start max-w-[calc(100%-2rem)]"}`,children:(0,r.jsxs)("div",{className:`
                        relative py-3 text-base leading-loose break-words
                        ${"user"===e.role?"px-5 bg-zinc-900 text-zinc-50 rounded-md shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]":"px-5 bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)] rounded-md"}
                    `,children:[(0,r.jsx)("button",{onClick:()=>p(e.content),className:`absolute top-2 right-2 p-1.5 rounded-md opacity-0 group-hover:opacity-100 transition-opacity ${"user"===e.role?"bg-zinc-700/50 text-zinc-300":"bg-zinc-200/50 text-zinc-600"}`,children:t?(0,r.jsx)(d.A,{size:14}):(0,r.jsx)(c.A,{size:14})}),(0,r.jsx)("div",{className:"pr-8 overflow-hidden",children:(0,r.jsx)(a.oz,{remarkPlugins:[l.A],components:{code({node:e,className:t,children:s}){let i=/language-(\w+)/.exec(t||""),a=String(s).replace(/\n$/,""),l=e?.position?.start?.offset??Math.random();return i?(0,r.jsxs)("div",{className:"relative group/code my-4 bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute top-3 right-3 z-10 flex items-center gap-2 opacity-0 group-hover/code:opacity-100 transition-opacity duration-300",children:[(0,r.jsx)("span",{className:"text-xs text-zinc-400 select-none",children:i[1]}),(0,r.jsx)("button",{onClick:()=>p(a,l),className:"p-1 rounded-md bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:text-zinc-50",children:u===l?(0,r.jsx)(d.A,{size:14,className:"text-emerald-400"}):(0,r.jsx)(c.A,{size:14})})]}),(0,r.jsx)(n.A,{style:o.A,language:i[1],PreTag:"div",customStyle:{padding:"1rem",backgroundColor:"transparent",overflow:"auto"},children:a})]}):(0,r.jsx)("code",{className:"bg-zinc-200 text-zinc-800 px-1 py-0.5 rounded-md break-all",children:s})},p:({children:e})=>(0,r.jsx)("p",{className:"mb-2 last:mb-0 break-words",children:e}),ul:({children:e})=>(0,r.jsx)("ul",{className:"list-disc list-inside mb-2 last:mb-0 break-words",children:e}),ol:({children:e})=>(0,r.jsx)("ol",{className:"list-decimal list-inside mb-2 last:mb-0 break-words",children:e}),li:({children:e})=>(0,r.jsx)("li",{className:"mb-1 break-words",children:e}),h1:({children:e})=>(0,r.jsx)("h1",{className:"text-xl font-bold mb-2 break-words",children:e}),h2:({children:e})=>(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2 break-words",children:e}),h3:({children:e})=>(0,r.jsx)("h3",{className:"text-md font-semibold mb-2 break-words",children:e}),blockquote:({children:e})=>(0,r.jsx)("blockquote",{className:"border-l-4 border-zinc-300 pl-4 italic mb-2 break-words",children:e})},children:e.content})})]})}),"user"===e.role&&(0,r.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-400 flex-shrink-0"})]})}},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},47519:(e,t,s)=>{"use strict";s.d(t,{V:()=>p});var r=s(27541),i=s(59088),a=s(19012);let n=i.forwardRef(({className:e,type:t,...s},i)=>(0,r.jsx)("input",{type:t,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));n.displayName="Input";var o=s(26411),l=s(55133),d=s(46457),c=s(50265),u=s(44788);function x({children:e}){let{isSidebarOpen:t}=(0,u.n)();return(0,r.jsx)("div",{className:(0,a.cn)("fixed bottom-6 left-0 right-0 transition-all duration-300 ease-in-out",t?"left-64":"left-20"),children:e})}function p({message:e,setMessage:t,onSubmit:s,onBranchOut:i,deleteBranch:a}){return(0,r.jsx)(x,{children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,r.jsxs)("form",{onSubmit:s,className:"relative flex items-center bg-white/80 backdrop-blur-sm border border-zinc-200 rounded-full shadow-xl p-2 group transition-shadow duration-300 ease-in-out focus-within:ring-2 focus-within:ring-zinc-300",children:[(0,r.jsx)(n,{type:"text",className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none focus-visible:ring-offset-0 focus-visible:ring-0 text-base placeholder:text-zinc-500",value:e,onChange:e=>t(e.target.value),placeholder:"Type your message..."}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(o.$,{type:"submit",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900",disabled:!e.trim(),children:(0,r.jsx)(l.A,{size:20})}),i&&(0,r.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900",onClick:i,children:(0,r.jsx)(d.A,{size:20})}),a&&(0,r.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-red-500 hover:bg-red-100 hover:text-red-600",onClick:a,children:(0,r.jsx)(c.A,{size:20})})]})]})})})}},55511:e=>{"use strict";e.exports=require("crypto")},56611:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(70873).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/page.tsx","default")},57964:(e,t,s)=>{Promise.resolve().then(s.bind(s,56611))},60982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(27541),i=s(59088),a=s(47519),n=s(38841),o=s(9455),l=s(81158),d=s(66145),c=s(26597),u=s(20869),x=s(90434);function p(){let{user:e}=(0,u.Jd)(),{getMessagesForBranch:t,addMessageToBranch:s,getBranchParent:p,createBranch:m,setCredits:h,setBranchTitle:b}=(0,l.P)(),[f,g]=(0,i.useState)([]),[v,j]=(0,i.useState)([]),[w,y]=(0,i.useState)(""),[z,N]=(0,i.useState)(!1),[k,_]=(0,i.useState)(""),[q]=(0,i.useState)((0,n.A)()),P=(0,i.useRef)(!1),A=(0,o.useRouter)(),S=async e=>{if(e.preventDefault(),!w.trim())return;P.current||(await m(q),P.current=!0);let t=await s(q,{role:"user",content:w});g(t),y(""),N(!0),_(""),setTimeout(async()=>{try{let{content:e,credits:r}=await (0,d.rJ)([...v,...t],e=>{_(e)});h(r),_("");let i=await s(q,{role:"assistant",content:e});if(g(i),N(!1),2===i.length){let{title:e,credits:t}=await (0,d.KS)(q);await b(q,e),h(t)}"/"===window.location.pathname&&A.push(`/branch/${q}`)}catch(e){console.error("Error getting LLM response:",e),N(!1),_("")}},0)};return 0!==f.length||z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 pb-36",children:[f.map((e,t)=>(0,r.jsx)(c.c,{message:e},t)),k&&(0,r.jsx)(c.c,{message:{role:"assistant",content:k}}),z&&!k&&(0,r.jsxs)("div",{className:"flex items-end gap-3 justify-start",children:[(0,r.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300"}),(0,r.jsx)("div",{className:"group flex flex-col items-start w-full",children:(0,r.jsx)("div",{className:"relative px-5 py-3 rounded-md bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]",children:(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"})]})})})]})]})}),(0,r.jsx)(a.V,{message:w,setMessage:y,onSubmit:S})]}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-200px)]",children:(0,r.jsxs)("div",{className:"text-center space-y-8 max-w-2xl mx-auto px-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-20 h-20 flex items-center justify-center bg-zinc-900 rounded-2xl shadow-lg",children:(0,r.jsx)(x.A,{className:"w-12 h-12 text-white"})})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-zinc-900",children:["Hey ",e?.firstName||"there",", what would you like to explore today?"]}),(0,r.jsx)("p",{className:"text-lg text-zinc-600",children:"Start a conversation and dive down the rabbit hole of possibilities"})]}),(0,r.jsx)("div",{className:"w-full max-w-2xl",children:(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("form",{onSubmit:S,className:"flex items-center bg-white border border-zinc-200 rounded-full shadow-xl p-2",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 bg-transparent border-none focus:outline-none focus:ring-0 text-base placeholder:text-zinc-500 px-4 py-2",value:w,onChange:e=>y(e.target.value),placeholder:"Type your message..."}),(0,r.jsx)("button",{type:"submit",className:"rounded-full h-10 w-10 bg-zinc-900 text-white hover:bg-zinc-800 transition-colors flex items-center justify-center disabled:opacity-50",disabled:!w.trim(),children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},74075:e=>{"use strict";e.exports=require("zlib")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[924,205,660,386,535],()=>s(23039));module.exports=r})();