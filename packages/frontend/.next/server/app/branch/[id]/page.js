(()=>{var e={};e.id=827,e.ids=[827],e.modules={521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(70873).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/branch/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/branch/[id]/page.tsx","default")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5529:e=>{"use strict";e.exports=require("stream")},8106:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(24660);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26597:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var s=r(27541),a=r(59088),i=r(93028),n=r(94932),o=r(78597),l=r(88414),d=r(13820),c=r(48182);let u=({message:e})=>{let[t,r]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),x=(e,t)=>{navigator.clipboard.writeText(e),"number"==typeof t?(p(t),setTimeout(()=>p(null),2e3)):(r(!0),setTimeout(()=>r(!1),2e3))};return(0,s.jsxs)("div",{className:`flex items-end gap-3 group relative ${"user"===e.role?"justify-end":"justify-start"}`,children:["assistant"===e.role&&(0,s.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300 flex-shrink-0"}),(0,s.jsx)("div",{className:`flex flex-col ${"user"===e.role?"max-w-[60%] items-end":"items-start max-w-[calc(100%-2rem)]"}`,children:(0,s.jsxs)("div",{className:`
                        relative py-3 text-base leading-loose break-words
                        ${"user"===e.role?"px-5 bg-zinc-900 text-zinc-50 rounded-md shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]":"px-5 bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)] rounded-md"}
                    `,children:[(0,s.jsx)("button",{onClick:()=>x(e.content),className:`absolute top-2 right-2 p-1.5 rounded-md opacity-0 group-hover:opacity-100 transition-opacity ${"user"===e.role?"bg-zinc-700/50 text-zinc-300":"bg-zinc-200/50 text-zinc-600"}`,children:t?(0,s.jsx)(d.A,{size:14}):(0,s.jsx)(c.A,{size:14})}),(0,s.jsx)("div",{className:"pr-8 overflow-hidden",children:(0,s.jsx)(i.oz,{remarkPlugins:[l.A],components:{code({node:e,className:t,children:r}){let a=/language-(\w+)/.exec(t||""),i=String(r).replace(/\n$/,""),l=e?.position?.start?.offset??Math.random();return a?(0,s.jsxs)("div",{className:"relative group/code my-4 bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute top-3 right-3 z-10 flex items-center gap-2 opacity-0 group-hover/code:opacity-100 transition-opacity duration-300",children:[(0,s.jsx)("span",{className:"text-xs text-zinc-400 select-none",children:a[1]}),(0,s.jsx)("button",{onClick:()=>x(i,l),className:"p-1 rounded-md bg-zinc-800 text-zinc-300 hover:bg-zinc-700 hover:text-zinc-50",children:u===l?(0,s.jsx)(d.A,{size:14,className:"text-emerald-400"}):(0,s.jsx)(c.A,{size:14})})]}),(0,s.jsx)(n.A,{style:o.A,language:a[1],PreTag:"div",customStyle:{padding:"1rem",backgroundColor:"transparent",overflow:"auto"},children:i})]}):(0,s.jsx)("code",{className:"bg-zinc-200 text-zinc-800 px-1 py-0.5 rounded-md break-all",children:r})},p:({children:e})=>(0,s.jsx)("p",{className:"mb-2 last:mb-0 break-words",children:e}),ul:({children:e})=>(0,s.jsx)("ul",{className:"list-disc list-inside mb-2 last:mb-0 break-words",children:e}),ol:({children:e})=>(0,s.jsx)("ol",{className:"list-decimal list-inside mb-2 last:mb-0 break-words",children:e}),li:({children:e})=>(0,s.jsx)("li",{className:"mb-1 break-words",children:e}),h1:({children:e})=>(0,s.jsx)("h1",{className:"text-xl font-bold mb-2 break-words",children:e}),h2:({children:e})=>(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2 break-words",children:e}),h3:({children:e})=>(0,s.jsx)("h3",{className:"text-md font-semibold mb-2 break-words",children:e}),blockquote:({children:e})=>(0,s.jsx)("blockquote",{className:"border-l-4 border-zinc-300 pl-4 italic mb-2 break-words",children:e})},children:e.content})})]})}),"user"===e.role&&(0,s.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-400 flex-shrink-0"})]})}},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},47519:(e,t,r)=>{"use strict";r.d(t,{V:()=>x});var s=r(27541),a=r(59088),i=r(19012);let n=a.forwardRef(({className:e,type:t,...r},a)=>(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));n.displayName="Input";var o=r(26411),l=r(55133),d=r(46457),c=r(50265),u=r(44788);function p({children:e}){let{isSidebarOpen:t}=(0,u.n)();return(0,s.jsx)("div",{className:(0,i.cn)("fixed bottom-6 left-0 right-0 transition-all duration-300 ease-in-out",t?"left-64":"left-20"),children:e})}function x({message:e,setMessage:t,onSubmit:r,onBranchOut:a,deleteBranch:i}){return(0,s.jsx)(p,{children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,s.jsxs)("form",{onSubmit:r,className:"relative flex items-center bg-white/80 backdrop-blur-sm border border-zinc-200 rounded-full shadow-xl p-2 group transition-shadow duration-300 ease-in-out focus-within:ring-2 focus-within:ring-zinc-300",children:[(0,s.jsx)(n,{type:"text",className:"flex-1 bg-transparent border-none focus:ring-0 focus:outline-none focus-visible:ring-offset-0 focus-visible:ring-0 text-base placeholder:text-zinc-500",value:e,onChange:e=>t(e.target.value),placeholder:"Type your message..."}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.$,{type:"submit",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900",disabled:!e.trim(),children:(0,s.jsx)(l.A,{size:20})}),a&&(0,s.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900",onClick:a,children:(0,s.jsx)(d.A,{size:20})}),i&&(0,s.jsx)(o.$,{type:"button",variant:"ghost",size:"icon",className:"rounded-full h-10 w-10 text-red-500 hover:bg-red-100 hover:text-red-600",onClick:i,children:(0,s.jsx)(c.A,{size:20})})]})]})})})}},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70319:(e,t,r)=>{Promise.resolve().then(r.bind(r,521))},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},74075:e=>{"use strict";e.exports=require("zlib")},74267:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(27541),a=r(59088),i=r(47519),n=r(38841),o=r(9455),l=r(81158),d=r(66145),c=r(26597);function u(){(0,l.P)(e=>e.getMessagesForBranch);let e=(0,l.P)(e=>e.addMessageToBranch),t=(0,l.P)(e=>e.setBranchParent);(0,l.P)(e=>e.getBranchParent);let r=(0,l.P)(e=>e.deleteBranch),u=(0,l.P)(e=>e.createBranch),p=(0,l.P)(e=>e.setCredits),x=(0,l.P)(e=>e.setBranchTitle),[m,h]=(0,a.useState)(""),[b,f]=(0,a.useState)([]),[g,v]=(0,a.useState)([]),[j,w]=(0,a.useState)(!1),[y,z]=(0,a.useState)(""),N=(0,o.useParams)(),k=N?.id,P=(0,o.useRouter)();async function _(t){if(t.preventDefault(),!m.trim())return;let r=await e(k,{role:"user",content:m});f(r),h(""),w(!0),z(""),setTimeout(async()=>{try{let{content:t,credits:s}=await (0,d.rJ)([...g,...r],e=>{z(e)});p(s),z("");let a=await e(k,{role:"assistant",content:t});if(f(a),w(!1),2===a.length){let{title:e,credits:t}=await (0,d.KS)(k);await x(k,e),p(t)}}catch(e){console.error("Error getting LLM response:",e),w(!1),z("")}},0)}async function q(){let e=(0,n.A)();await u(e),await t(e,k),P.push(`/branch/${e}`)}async function A(){await r(k),P.push("/")}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"max-w-[49rem] mx-auto",children:(0,s.jsxs)("div",{className:"flex-1 space-y-8 pb-36",children:[b.map((e,t)=>(0,s.jsx)(c.c,{message:e},t)),y&&(0,s.jsx)(c.c,{message:{role:"assistant",content:y}}),j&&!y&&(0,s.jsxs)("div",{className:"flex items-end gap-3 justify-start",children:[(0,s.jsx)("div",{className:"w-2 h-2 mb-4 rounded-full bg-zinc-300"}),(0,s.jsx)("div",{className:"group flex flex-col items-start w-full",children:(0,s.jsx)("div",{className:"relative px-5 py-3 rounded-md bg-zinc-50 border-l-2 border-zinc-200 shadow-[2px_2px_0px_0px_rgba(0,0,0,0.08)]",children:(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.3s]"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse [animation-delay:-0.15s]"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"})]})})})]})]})}),(0,s.jsx)(i.V,{message:m,setMessage:h,onSubmit:_,onBranchOut:q,deleteBranch:A})]})}},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},77661:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(74257),a=r(25366),i=r(26416),n=r.n(i),o=r(92919),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["branch",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,521)),"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/branch/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8106))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,74507)),"/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33052,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,81629,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,6874,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,8106))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/jyothiraditya/rabbithole/rabbithole/packages/frontend/src/app/branch/[id]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/branch/[id]/page",pathname:"/branch/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},78567:(e,t,r)=>{Promise.resolve().then(r.bind(r,74267))},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[924,205,660,386,535],()=>r(77661));module.exports=s})();